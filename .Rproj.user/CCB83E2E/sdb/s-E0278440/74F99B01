{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Problem Set 5\"\nauthor: \"Michael An\"\ndate: \"March 25, 2016\"\noutput: pdf_document\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE)\nlibrary(ggplot2)\n```\n\n###Histgram of diamond prices for each diamond color, where the bars are color coded by the cut\n```{r}\nggplot(data = diamonds, aes(x=price)) +\n  geom_histogram(binwidth = 200, aes(fill = cut)) +\n  scale_color_brewer(type = 'qual') +\n  facet_wrap(~color) +\n  scale_x_continuous(breaks = seq(0,4000,1000)) +\n  scale_y_continuous(trans = \"sqrt\") +\n  xlim(c(0,4000)) +\n  labs(y = \"sqrt(count)\")\n  \n```\n\n###Scatterplot of diamond price vs table, color coded by the diamond cut\n```{r}\nggplot(data = diamonds, aes(x=table, y=price)) +\n  geom_point(aes(color=cut)) +\n  scale_color_brewer(type = 'qual')\n```\n\nSome observations about this plot. First, the points line up at discrete table values, since data is collected at discrete table values. There is a big spread of prices for all the cuts, for all table values.  Finally, and most importantly, some of the cuts concentrate at a very specific range of table values, especially the \"ideal\" cuts and \"Premium\" cuts.\n\n###Scatterplot of (log) diamond price vs. volume, colored by diamond clarity\n\nNote: Volume here is computed roughly using the x, y, and z dimensions available\n\n```{r}\ndiamonds$volume <- diamonds$x * diamonds$y * diamonds$z\n\nggplot(data = subset(diamonds, volume < .99*max(volume)), aes(x=volume, y=price)) +\n  geom_point(aes(color=clarity)) +\n  xlim(c(0,500)) +\n  scale_y_continuous(trans = \"log\")\n\n```\n\n###Scatterplot of price/carat ratio over cut, clarity, and color\n```{r}\nggplot(data=diamonds, aes(x=cut, y=price/carat)) +\n  geom_point(aes(color = color), position=position_jitter(h=0)) +\n  facet_wrap(~clarity) +\n  scale_color_brewer(type = 'div')\n\n```\n\n\n\n##Further facebook data analysis\n\n```{r echo=FALSE}\npf <- read.csv(\"pseudo_facebook.tsv\", sep = \"\\t\")\n```\n\n###Create variable for proportion of friendships that each user initiated\n```{r}\npf$prop_initiated <- pf$friendships_initiated / pf$friend_count\n\n```\n\n###Create a line graph of (median) proportion of friendships initiated vs tenure, colored by the brackets for the year the user joined facebook\n```{r}\n#Create year_joined.bucket variable\npf$year_joined.bucket <- cut( floor(2014-pf$tenure/365),  \n                      breaks=c(2004,2009,2011,2012,2014))\n\n#plot a line graph of median of prop_initiated vs tenure\nggplot(data=pf, aes(x=30*round(tenure/30), y=prop_initiated)) +\n  geom_line(aes(color = year_joined.bucket),stat=\"summary\", fun.y = median) +\n  labs(x = \"tenure, binned in 30 day increments\")\n```\n\nWe see from the graph that the higher the tenure, the lower the proportion of friends the user initiated.  For the group with the smallest tenure (joined between 2012-2014), the mean proportion over the entire group is .665.  The reason for this general trend is probably that newer users are more eager to increase their friend count, so they feel the need to initiate more friendships.\n\n##Final Analysis on Gapminder Data: Looking at relationships between infact mortality, GDP, and food availability\n```{r echo=FALSE}\nlibrary(dplyr)\n\n#load data\nfood_consump <- read.csv(\"indicator food_consumption.csv\") \nfood_consump <- subset(food_consump, select = c(\"X\", \"X2007\"))\nnames(food_consump) <- c(\"Country\", \"X2008.food.consump\")\n\ninfant_mort <- read.csv(\"Child_Death_All_cause .csv\")\nnames(infant_mort) <- c(\"Country\", \"X2008.infant.mort\")\n\nGDP_PPP <- read.csv(\"indicatorGNIpercapitaPPP.csv\")\nGDP_PPP <- subset(GDP_PPP, select = c(\"GNI.per.capita..PPP..current.international...\", \"X2008\"))\nnames(GDP_PPP) <- c(\"Country\", \"X2008.GDP.PPP\")\n\njoined_country_data <- inner_join(food_consump, infant_mort, by = \"Country\") %>%\n  inner_join(GDP_PPP, by = \"Country\")\n\nqplot(joined_country_data$X2008.GDP.PPP, geom = \"histogram\")\n\njoined_country_data$GDP.PPP.bucket <-\n  quantile(joined_country_data$X2008.GDP.PPP, na.rm = TRUE, probs = \n                 seq(0,1,.1)) %>%\n  cut(joined_country_data$X2008.GDP.PPP, breaks = .)\n```\n```{r}\n#Plot a scatterplot of food consumption, and infant mortality, colored by each GDP bracket\nggplot(data = joined_country_data, aes(x=X2008.food.consump, y=X2008.infant.mort)) +\n  geom_point(aes(color = GDP.PPP.bucket))\n```\n\nThe trends are very clear looking at this graph: The higher the consumption, the lower the infant mortality. Furthermore, the countries with the highest GDP values (given by the blueish and purpleish colors), are all clustered at the high food consumption, low infant mortality values\n\n",
    "created" : 1460306434223.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3481682778",
    "id" : "74F99B01",
    "lastKnownWriteTime" : 1460306436,
    "last_content_update" : 1460306436693,
    "path" : "~/Documents/Foundations_Course/EDA/Problem Set 5.Rmd",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}